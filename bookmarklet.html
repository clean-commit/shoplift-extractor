<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Shoplift Data Extractor Bookmarklet</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .bookmarklet {
        display: inline-block;
        padding: 10px 15px;
        background: #6d28d9;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin: 20px 0;
      }
      .instructions {
        line-height: 1.6;
      }
      pre {
        background: #f5f5f5;
        padding: 15px;
        overflow: auto;
      }
      .warning {
        color: #e53e3e;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>Shoplift Data Extractor Bookmarklet</h1>
    <div class="instructions">
      <p>Drag this link to your bookmarks bar:</p>
      <a
        class="bookmarklet"
        href="javascript:!function()%7Bconst%20e%3D(e%2Ct%3D!1)%3D%3E%7Bconst%20r%3Ddocument.createElement(%22div%22)%3Br.style.position%3D%22fixed%22%2Cr.style.top%3D%2210px%22%2Cr.style.left%3D%2250%25%22%2Cr.style.transform%3D%22translateX(-50%25)%22%2Cr.style.background%3Dt%3F%22%23f44336%22%3A%22%236d28d9%22%2Cr.style.color%3D%22white%22%2Cr.style.padding%3D%2210px%2020px%22%2Cr.style.borderRadius%3D%225px%22%2Cr.style.zIndex%3D%229999%22%2Cr.style.boxShadow%3D%220%202px%2010px%20rgba(0%2C0%2C0%2C0.2)%22%2Cr.textContent%3De%2Cdocument.body.appendChild(r)%2CsetTimeout((()%3D%3E%7Br.remove()%7D)%2Ct%3F5e3%3A3e3)%7D%2Ct%3D(e%2Ct%3D5e3%2Cr%3D200)%3D%3Enew%20Promise(((o%2Cn)%3D%3E%7Bconst%20c%3DDate.now()%2Ci%3D()%3D%3E%7Bconst%20s%3Ddocument.querySelectorAll(e)%3Bs.length%3E0%3Fo(s)%3ADate.now()-c%3Et%3Fn(new%20Error(%60Elements%20not%20found%3A%20%24%7Be%7D%60))%3AsetTimeout(i%2Cr)%7D%3Bi()%7D))%2Cr%3De%3D%3Ee%3FparseFloat(e.replace(%2F%5B%24%2C%E2%82%AC%C2%A3%25%5D%2Fg%2C%22%22))%3A0%2Co%3D(e%2Ct)%3D%3E%7Bconst%20o%3Dr(e)%2Cn%3Dr(t)%3Bif(0%3D%3D%3Do)return%20n%3E0%3F%22%2B100%25%22%3A%220%25%22%3Bconst%20c%3D(n-o)%2Fo*100%3Breturn%60%24%7Bc%3E0%3F%22%2B%22%3A%22%22%7D%24%7Bc.toFixed(1)%7D%25%60%7D%3B(async(n%3D!1)%3D%3E%7Be(%22Extracting%20Shoplift%20test%20data...%22)%3Btry%7Bconst%20c%3Dn%3F3e3%3A1e4%3Btry%7Bawait%20t(%22.headline-bold%22%2Cc)%2Cawait%20t(%22.test-report-variant-card-stats%22%2Cc)%7Dcatch(e)%7Bconsole.warn(%22Some%20page%20elements%20not%20found%3A%22%2Ce.message)%7Dawait%20new%20Promise((e%3D%3EsetTimeout(e%2C500)))%3B%5B...%5B...document.querySelectorAll(%22.dropdown-item.d-flex.items-center.gap-8px.gap-8px%22)%5D.filter((e%3D%3Ee.innerText.toLowerCase().includes(%22all%20metrics%22)))%5D.forEach((e%3D%3Ee.click()))%3Bconst%20i%3D(()%3D%3E%7Blet%20e%3D%22%22%2Ct%3D%22%22%3Btry%7Bconst%20r%3Ddocument.querySelectorAll(%22h5.headline-bold.mb-32px%22)%3Bif(e%3Dr%5B0%5D%3F.textContent.trim()%2C!e)%7Bconst%20t%3Dwindow.location.href.match(%2Fstore%5C%2F(%5B%5E%5C%2F%5D%2B)%2F)%3Bt%26%26t%5B1%5D%26%26(e%3DdecodeURIComponent(t%5B1%5D))%7Dconst%20o%3Ddocument.querySelectorAll(%22h2%22)%3Bfor(const%20e%20of%20o)%7Bconst%20r%3De.textContent.trim()%3Bif(r%26%26!r.includes(%22Performance%20overview%22)%26%26!r.includes(%22Traffic%20overview%22)%26%26!r.includes(%22Device%20performance%22))%7Bt%3Dr%3Bbreak%7D%7D%7Dcatch(e)%7Bconsole.error(%22Error%20extracting%20test%20info%3A%22%2Ce)%7Dreturn%7Bstore_name%3Ae%7C%7C%22Unknown%20Store%22%2Ctest_name%3At%7C%7C%22Unknown%20Test%22%7D%7D)()%2Cs%3D(()%3D%3E%7Btry%7Bconst%20e%3Ddocument.querySelectorAll(%22div.d-flex.rounded-4px.items-center.p-16px.mt-8px%20div%22)%3Bif(0%3D%3D%3De.length)return%22Unknown%20Goal%22%3Bconst%20t%3D%7B%7D%3Bfor(const%20r%20of%20e)%7Bconst%20e%3Dr.querySelectorAll(%22label%22)%3Bt%5Be%5B0%5D.textContent.trim().toLowerCase().replace(%22%3A%22%2C%22%22)%5D%3De%5B1%5D.textContent.trim()%7Dreturn%20t%7Dcatch(e)%7Breturn%20console.error(%22Error%20extracting%20test%20type%3A%22%2Ce)%2C%22Unknown%20Goal%22%7D%7D)()%2Ca%3D(()%3D%3E%7Btry%7Bconst%20e%3Ddocument.querySelectorAll(%22.test-report-overview-row%20%3E%20div%22)%2Ct%3D%7B%7D%3Bfor(const%20r%20of%20e)%7Bconst%20e%3Dr.querySelector(%22label%22)%2Co%3Dr.querySelector(%22div%22)%3Bt%5Be.textContent.trim().toLowerCase().replace(%22.%22%2C%22%22).replace(%2F%5Cs%2B%2Fg%2C%22_%22)%5D%3Do.textContent.trim().replace(%2F%5Cs%2B%2Fg%2C%22%20%22)%7Dreturn%20t%7Dcatch(e)%7Bconsole.error(%22Error%20extracting%20test%20overview%3A%22%2Ce)%7Dreturn%7B%7D%7D)()%2Cl%3D(()%3D%3E%7Bconst%20e%3D%7B%7D%3Btry%7Bdocument.querySelectorAll(%22.performance-table%22).forEach((t%3D%3E%7Bconst%20r%3DArray.from(t.querySelectorAll(%22thead%20th%22)).map((e%3D%3Ee.textContent.trim()))%3Br.includes(%22Device%22)%26%26t.querySelectorAll(%22tbody%22).forEach((t%3D%3E%7Bconst%20n%3Dt.querySelector(%22th%20span%22)%3Bif(!n)return%3Bconst%20c%3Dn.textContent.trim().toLowerCase().replace(%2Fall%20devices%2Fi%2C%22all_devices%22).replace(%2F%5Cs%2B%2Fg%2C%22_%22)%3Be%5Bc%5D%3D%7B%7D%3Bconst%20i%3D%7B%7D%3Blet%20s%2Ca%2Cl%3D%5B%22visitors%22%2C%22clicks%22%2C%5B%22ctr%22%2C%22clickthrough%20rate%22%5D%2C%22cart%20adds%22%2C%5B%22acr%22%2C%22add%20to%20cart%20rate%22%5D%2C%22bounce%20rate%22%2C%22orders%22%2C%5B%22cvr%22%2C%22conversion%20rate%22%5D%2C%22revenue%22%2C%5B%22aov%22%2C%22average%20order%20value%22%5D%2C%5B%22rpv%22%2C%22revenue%20per%20visitor%22%5D%5D%3Br.forEach(((e%2Ct)%3D%3E%7Bconst%20r%3De.toLowerCase()%3Bl.forEach(((e%2Co)%3D%3E%7Bif(Array.isArray(e))%7Bif(e.some((e%3D%3Er.includes(e))))return%20l.splice(o%2C1)%2Cvoid(i%5Be%5B0%5D%5D%3Dt)%7Delse%20if(r.includes(e))return%20l.splice(o%2C1)%2Cvoid(i%5Be%5D%3Dt)%7D))%7D))%2Ct.querySelectorAll(%22tr%22).forEach((e%3D%3E%7Bconst%20t%3De.querySelector(%22th%3Anth-child(2)%22)%7C%7Ce.querySelector(%22th%22)%3Bif(!t)return%3Bconst%20r%3Dt.textContent.trim()%3Br.includes(%22Variant%22)%3Fs%3De%3Ar.includes(%22Original%22)%26%26(a%3De)%7D))%2CObject.keys(i).forEach((t%3D%3E%7Bconst%20r%3Di%5Bt%5D%3Bif(void%200!%3D%3Dr)%7Bif(e%5Bc%5D%5Bt%5D%3D%7Boriginal%3A%220%22%2Cvariant%3A%220%22%2Cchange%3A%220%25%22%7D%2Ca)%7Bconst%20o%3Da.querySelectorAll(%22th%2C%20td%22)%5Br%5D%3Bif(o)%7Bconst%20r%3Do.textContent.trim()%3Be%5Bc%5D%5Bt%5D.original%3Dr.split(%22%20%22)%5B0%5D%7D%7Dif(s)%7Bconst%20n%3Ds.querySelectorAll(%22th%2C%20td%22)%5Br%5D%3Bif(n)%7Bconst%20r%3Dn.textContent.trim()%3Be%5Bc%5D%5Bt%5D.variant%3Dr.split(%22%20%22)%5B0%5D%3Bconst%20i%3Dn.querySelector(%22.label-tint%22)%3Bif(i)e%5Bc%5D%5Bt%5D.change%3Di.textContent.trim()%3Belse%7Bconst%20r%3De%5Bc%5D%5Bt%5D.original%2Cn%3De%5Bc%5D%5Bt%5D.variant%3Br%26%26n%26%26(e%5Bc%5D%5Bt%5D.change%3Do(r%2Cn))%7D%7D%7D%7D%7D))%7D))%7D))%7Dcatch(e)%7Bconsole.error(%22Error%20extracting%20metrics%3A%22%2Ce)%7Dreturn%20e%7D)()%2Cd%3D(e%3D%3E%7Bconst%20t%3Dr(e.desktop.visitors.original)%2Br(e.desktop.visitors.variant)%2Co%3Dr(e.mobile.visitors.original)%2Br(e.mobile.visitors.variant)%3Breturn%7Btotal%3At%2Bo%2Cdesktop%3At%2Cmobile%3Ao%7D%7D)(l)%2Cu%3D%7Bstore%3Ai.store_name%2Ctest%3Ai.test_name%2Cconfiguration%3As%2Coverview%3Aa%2Ctraffic%3Ad%2Cmetrics%3Al%2CextractedAt%3A(new%20Date).toISOString()%7D%2Cm%3DJSON.stringify(u%2Cnull%2C2)%3Bif(document.querySelector(%22%23shoplift-test-data%22))return%20document.querySelector(%22%23shoplift-test-data%22).textContent%3DJSON.stringify(u%2Cnull%2C4)%2Cu%3Bconst%20f%3Dnew%20Blob(%5Bm%5D%2C%7Btype%3A%22application%2Fjson%22%7D)%2Cp%3DURL.createObjectURL(f)%2Cy%3Ddocument.createElement(%22a%22)%3Breturn%20y.href%3Dp%2Cy.download%3D%60shoplift-%24%7Bi.test.replace(%2F%5B%5Ea-z0-9%5D%2Fgi%2C%22-%22).toLowerCase()%7D-%24%7B(new%20Date).toISOString().slice(0%2C10)%7D.json%60%2Cdocument.body.appendChild(y)%2Cy.click()%2Cdocument.body.removeChild(y)%2Ce(%22Test%20data%20extracted%20successfully!%22)%2Cu%7Dcatch(t)%7Bthrow%20console.error(%22Error%20extracting%20test%20data%3A%22%2Ct)%2Ce(%60Error%20extracting%20test%20data%3A%20%24%7Bt.message%7D%60%2C!0)%2Ct%7D%7D)()%7D()%3B"
        >Shoplift Extractor</a
      >

      <h2>Instructions</h2>
      <ol>
        <li>Drag the above link to your browser's bookmarks bar</li>
        <li>Navigate to a Shoplift test results page</li>
        <li>Click the bookmarklet to extract test data</li>
        <li>The data will be downloaded as a JSON file</li>
      </ol>

      <h2>Bookmarklet Size</h2>
      <p>6.86 KB</p>
    </div>
  </body>
</html>
